import y from"react";import{matchResourceFromRoute as k,ResourceContext as A}from"@refinedev/core";import{useCallback as R,useContext as E}from"react";import P from"qs";import{useNavigate as b,useLocation as v,Link as I,matchPath as S,useParams as F}from"react-router-dom";var h=t=>{if(typeof t>"u")return t;let o=Number(t);return`${o}`===t?o:t};var x={addQueryPrefix:!0,skipNulls:!0,arrayFormat:"indices",encode:!1,encodeValuesOnly:!0},D={go:()=>{let{search:t,hash:o}=v(),r=b();return R(({to:s,type:n,query:e,hash:a,options:{keepQuery:c,keepHash:f}={}})=>{let u={...c&&t&&P.parse(t,{ignoreQueryPrefix:!0}),...e};u.to&&(u.to=encodeURIComponent(`${u.to}`));let p=Object.keys(u).length>0,m=`#${(a||f&&o||"").replace(/^#/,"")}`,d=m.length>1,C=`${s||""}${p?P.stringify(u,x):""}${d?m:""}`;return n==="path"?C:r(C,{replace:n==="replace"})},[o,t,r])},back:()=>{let t=b();return R(()=>{t(-1)},[t])},parse:()=>{var c;let t=F(),{pathname:o,search:r}=v(),{resources:i}=E(A),{resource:s,action:n,matchedRoute:e}=y.useMemo(()=>k(o,i),[i,o]);return Object.entries(t).length===0&&e&&(t=((c=S(e,o))==null?void 0:c.params)||{}),R(()=>{let f=P.parse(r,{ignoreQueryPrefix:!0}),u={...t,...f};return{...s&&{resource:s},...n&&{action:n},...(t==null?void 0:t.id)&&{id:decodeURIComponent(t.id)},pathname:o,params:{...u,current:h(u.current),pageSize:h(u.pageSize),to:u.to?decodeURIComponent(u.to):void 0}}},[o,r,t,s,n])},Link:y.forwardRef(function(o,r){return y.createElement(I,{...o,ref:r})})};import $ from"react";import{useResource as H}from"@refinedev/core";import N from"react";import{Route as j}from"react-router-dom";var B=(t,o)=>{let{name:r,list:i,create:s,show:n,edit:e}=t;if(typeof i=="string"&&o==="list")return i;if(typeof i=="object"&&o==="list")return i.path;if(typeof s=="string"&&o==="create")return s;if(typeof s=="object"&&o==="create")return s.path;if(typeof n=="string"&&o==="show")return n;if(typeof n=="object"&&o==="show")return n.path;if(typeof e=="string"&&o==="edit")return e;if(typeof e=="object"&&o==="edit")return e.path;let a=`/${r}`,c=`${["edit","create","clone","show"].includes(o)?o:""}`,f=`${["edit","show","clone"].includes(o)?":id":""}`;return[a,c,f].filter(Boolean).join("/")},T=t=>t.flatMap(r=>{let i=[];return["list","show","edit","create"].forEach(s=>{let n=r[s];if(typeof n<"u"&&typeof n!="string"){let e=typeof n=="function"?n:n.component,a=B(r,s);i.push({action:s,element:e,path:a}),s==="create"&&i.push({action:"clone",element:e,path:a})}}),i.map(({action:s,element:n,path:e})=>{let a=N.createElement(n,null);return N.createElement(j,{key:`${s}-${e}`,path:e,element:a})})});import{Routes as M}from"react-router-dom";var G=({children:t})=>{let{resources:o}=H(),r=$.useMemo(()=>T(o),[o]);return t?t(r):$.createElement(M,null,r)};import{useResource as Q,useGetToPath as V}from"@refinedev/core";import q from"react";import{Navigate as K}from"react-router-dom";var O=({resource:t,meta:o})=>{let r=V(),{resource:i,resources:s}=Q(t),n=i||s.find(e=>e.list);if(n){let e=r({resource:n,action:"list",meta:o});return e?q.createElement(K,{to:e}):(console.warn("No resource is found to navigate to."),null)}return console.warn("No resource is found to navigate to."),null};import L from"react";import{useTranslate as X,useWarnAboutChange as W}from"@refinedev/core";import l from"react";import{UNSAFE_NavigationContext as z}from"react-router-dom";function J(t,o=!0){let{navigator:r}=l.useContext(z);l.useEffect(()=>{if(!o)return;let i=r.go,s=r.push;return r.push=(...n)=>{t()!==!1&&s(...n)},r.go=(...n)=>{t()!==!1&&i(...n)},()=>{r.push=s,r.go=i}},[r,t,o])}function w(t,o=!0,r,i=!1){let s=l.useCallback(e=>(e.preventDefault(),e.returnValue=t,e.returnValue),[t]);l.useEffect(()=>(o&&!i&&window.addEventListener("beforeunload",s),()=>{window.removeEventListener("beforeunload",s)}),[s,o,i]);let n=l.useCallback(()=>{let e=window.confirm(t);return e&&r&&r(),e},[t]);J(n,o)}import{useLocation as Y}from"react-router-dom";var _=({translationKey:t="warnWhenUnsavedChanges",message:o="Are you sure you want to leave? You have unsaved changes."})=>{let r=X(),{pathname:i}=Y(),{warnWhen:s,setWarnWhen:n}=W();L.useEffect(()=>()=>n==null?void 0:n(!1),[i]);let e=L.useMemo(()=>r(t,o),[t,o,r]);return w(e,s,()=>{n==null||n(!1)}),null};import Z from"react";import{Navigate as ee,useLocation as te}from"react-router-dom";var oe=({to:t})=>{let{pathname:o,search:r}=te(),i=`${o}${r}`,s=i.length>1?`?to=${encodeURIComponent(i)}`:"";return Z.createElement(ee,{to:`${t}${s}`})};import{useParsed as re,useTranslate as ne,generateDefaultDocumentTitle as se,useUserFriendlyName as ie}from"@refinedev/core";import U,{useLayoutEffect as ae}from"react";import{useLocation as ue}from"react-router-dom";function ce({handler:t}){var d;let o=ue(),{action:r,id:i,params:s,pathname:n,resource:e}=re(),a=ne(),c=ie(),f=(e==null?void 0:e.identifier)??(e==null?void 0:e.name),p=(e==null?void 0:e.label)??((d=e==null?void 0:e.meta)==null?void 0:d.label)??c(f,r==="list"?"plural":"singular"),m=a(`${e==null?void 0:e.name}.${e==null?void 0:e.name}`,p);return ae(()=>{let g=se(a,e,r,`${i}`,p);t?document.title=t({action:r,resource:{...e??{},label:m,meta:{...e==null?void 0:e.meta,label:m}},params:s,pathname:n,autoGeneratedTitle:g}):document.title=g},[o]),U.createElement(U.Fragment,null)}import{useTranslate as fe}from"@refinedev/core";import{useEffect as pe}from"react";var me=t=>{let o=fe();return pe(()=>{t&&(typeof t=="string"?document.title=o(t):document.title=o(t.i18nKey))},[t]),r=>{typeof r=="string"?document.title=o(r):document.title=o(r.i18nKey)}};export{oe as CatchAllNavigate,ce as DocumentTitleHandler,O as NavigateToResource,G as RefineRoutes,_ as UnsavedChangesNotifier,D as default,x as stringifyConfig,me as useDocumentTitle};
//# sourceMappingURL=index.mjs.map